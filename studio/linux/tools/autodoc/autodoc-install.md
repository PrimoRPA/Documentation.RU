# Установка AutoDoc на Linux

## Установка JAVA

### Установка JAVA на дистрибутивы на основе Debian (Astra Linux)

Для проверки установленной версии Java введите:
```
$ java -version
```
Если Java не установлена или версия не устраивает - можно установить новую версию. Java позволяет устанавливать несколько версии одновременно.

Далее приведен пример для установки версии `openjdk-11-jdk`. Можно установить любую другую версию, при этом последовательность действий сохраняется.

Перед установкой обновите список пакетов:

```
$ sudo apt update
```

Опционально: установите актуальное обновление:

```
$ sudo apt dist-upgrade
```

Проверьте доступные версии OpenJDK:

```
$ apt policy openjdk-11-jdk
```
Установите пакет:

```
$ sudo apt install openjdk-11-jdk
```

### Установка JAVA на Линуксы на пакетной базе RPM-формата (RED OC)

Для проверки установленной версии Java введите:
```
$ java -version
```
Если Java не установлена или версия не устраивает - можно установить новую версию. Java позволяет устанавливать несколько версии одновременно.

Для этого необходимо проверить доступные для установки пакеты с помощью команды:

```
$ dnf search openjdk
```
Далее приведен пример для установки версии `openjdk-11-jdk`. Можно установить любую другую версию, при этом последовательность действий сохраняется.

Установите пакет:
```
$ sudo dnf install java-11-openjdk
```

**Первичная настройка Java (общая для всех Линуксов)**

Если на компьютере ранее была установлена Java, то проверьте правильность выбора активной версии Java:

```
$ sudo update-alternatives --config java
```

При необходимости - выберите правильную активную версию в диалоге команды.

Настройте автоматическую установку окружения Java после перезагрузки:

```
$ echo "export JAVA_HOME=/usr/lib/jvm/java-11-openjdk-amd64/" | sudo tee /etc/profile.d/java.sh
```

Загрузите окружение Java в текущую пользовательскую сессию:

```
$ source /etc/profile.d/java.sh
```
## Установка AutoDoc


Скопируйте пакет ` Autodoc-linux-x64-1.25.5.1.zip ` в удобный каталог, например: `/home/<current_user>`

Создайте каталог:

```
$ sudo mkdir /opt/primo/
```

Перенесите папку linux-x64 в `/opt/primo/autodoc`

```
$ sudo mv /home/<current_user>/linux-x64/ /opt/primo/autodoc
```
> Для возможности работать с компонентом необходимо будет настроить права для группы пользователей, как описано ниже

## Создание группы пользователей

Для работы пользователя необходима общая группа:

```
$ sudo groupadd primo-rpa
```

Задайте вновь созданную группу для папки Primo, куда были установленны необходимые компоненты Студии Линукс:

```
$ sudo chgrp -R primo-rpa /opt/primo/
```

Задайте права:

```
$ sudo chmod -R 770 /opt/primo/autodoc
```

## Настройка учетной записи пользователя

Создание учётной записи пользователя `<any_user>`:

```
$ sudo useradd -g primo-rpa -m -s /bin/bash <any_user>
```

Установка пароля учётной записи пользователя `<any_user>`:

```

$ sudo passwd <any_user>
Новый пароль : ***
Повторите ввод нового пароля : ***
passwd: пароль успешно обновлён
```

## Пример запуска AutoDoc на Linux

Загрузите окружение Java в текущую пользовательскую сессию (если до этого не загружали):

```
$ source /etc/profile.d/java.sh
```

Выполните команду для генерации html отчета для папки с проектом Primo:

```
$ /opt/primo/autodoc/PrimoAutodoc -i "<path-to-primo-projct-folder>" -o "<path-to-report-folder>" -local
```
